/*
 * shortcode.js 1.1.0
 * by @nicinabox
 * License: MIT
 * Issues: https://github.com/nicinabox/shortcode.js/issues
 */
var Shortcode=function(e,t){e&&(this.el=e,this.tags=t,this.matches=[],this.regex="\\[{name}(\\s[\\s\\S]*?)?\\](?:((?!\\s*?(?:\\[{name}|\\[\\/(?!{name})))[\\s\\S]*?)(\\[/{name}\\]))?",this.el.jquery&&(this.el=this.el[0]),this.matchTags(),this.convertMatchesToNodes(),this.replaceNodes())};if(Shortcode.prototype.matchTags=function(){var e,t,r,a,n,s,o,i=this.el.outerHTML;for(var c in this.tags){if(!this.tags.hasOwnProperty(c))return;r=this.template(this.regex,{name:c}),e=i.match(new RegExp(r,"g"))||[];for(var h=0,p=e.length;p>h;h++)t=e[h].match(new RegExp(r)),a=t[3]?"":void 0,s=t[0],n=this.escapeTagRegExp(s),o=this.parseOptions(t[1]),t[2]&&(a=t[2].trim(),s=s.replace(a,"").replace(/\n\s*/g,""),n=this.escapeTagRegExp(s).replace("\\]\\[","\\]([\\s\\S]*?)\\[")),this.matches.push({name:c,tag:s,regex:n,options:o,contents:a})}},Shortcode.prototype.convertMatchesToNodes=function(){var e,t,r,a=this.el.innerHTML;r=function(e,t,r,a,n,s,o){if(t)return e;var i=document.createElement("span");return i.setAttribute("data-sc-tag",this.tag),i.className="sc-node sc-node-"+this.name,i.outerHTML};for(var n=0,s=this.matches.length;s>n;n++)e='((data-sc-tag=")|(<pre.*)|(<code.*))?',t=new RegExp(e+this.matches[n].regex,"g"),a=a.replace(t,r.bind(this.matches[n]));this.el.innerHTML=a},Shortcode.prototype.replaceNodes=function(){var e,t,r,a,n,s,o=this;this.el.querySelectorAll(".sc-node");s=function(e){e.jquery&&(e=e[0]),e=o.parseCallbackResult(e),a.parentNode.replaceChild(e,a)};for(var i=0,c=this.matches.length;c>i;i++)e=this.matches[i],a=this.el.querySelector(".sc-node-"+e.name),a&&a.dataset.scTag===e.tag&&(n=this.tags[e.name].bind(e),r=s.bind(e),t=n(r),void 0!==t&&r(t))},Shortcode.prototype.parseCallbackResult=function(e){var t,r,a;switch(typeof e){case"function":e=document.createTextNode(e());break;case"string":if(t=document.createElement("div"),r=document.createDocumentFragment(),t.innerHTML=e,a=t.childNodes,a.length){for(var n=0,s=a.length;s>n;n++)r.appendChild(a[n].cloneNode(!0));e=r}else e=document.createTextNode(e);break;case"object":e.nodeType||(e=JSON.stringify(e),e=document.createTextNode(e));break;case"default":}return e},Shortcode.prototype.parseOptions=function(e){var t,r={};if(e){t=e.replace(/(\w+=)/g,"\n$1").split("\n"),t.shift();for(var a=0;a<t.length;a++){var n=t[a].split("=");r[n[0]]=n[1].replace(/\'|\"/g,"").trim()}return r}},Shortcode.prototype.escapeTagRegExp=function(e){return e.replace(/[\[\]\/]/g,"\\$&")},Shortcode.prototype.template=function(e,t){for(var r in t)e=e.replace(new RegExp("{"+r+"}","g"),t[r]);return e},String.prototype.trim=String.prototype.trim||function(){return this.replace(/^\s+|\s+$/g,"")},window.jQuery){var pluginName="shortcode";$.fn[pluginName]=function(e){return this.each(function(){$.data(this,pluginName)||$.data(this,pluginName,new Shortcode(this,e))}),this}}